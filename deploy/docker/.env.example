# ═══════════════════════════════════════════════════════════════════════
# Apollos AI — Docker Compose Environment Configuration
# ═══════════════════════════════════════════════════════════════════════
#
# Copy this file to .env and fill in the values:
#   cp .env.example .env
#
# Or use the setup script for guided configuration:
#   ./setup.sh
#
# Full reference: docs/reference/environment-variables.md

# ─── Docker Compose Settings ──────────────────────────────────────────
# These control docker-compose behavior, not the app itself.

# App image tag (default: latest). Pin to a version for stability.
# IMAGE_TAG=latest
# IMAGE_TAG=v1.0.0

# Host port for direct access (bypassing Caddy). Default: 50080.
# HOST_PORT=50080

# Domain for Caddy HTTPS (used in Caddyfile).
# Set to your FQDN for production, or localhost for development.
DOMAIN=localhost

# ─── Security (REQUIRED) ─────────────────────────────────────────────
# Generate with: python3 -c "import secrets; print(secrets.token_hex(32))"

# Flask session signing key. MUST be persistent across restarts.
FLASK_SECRET_KEY=

# Vault master key for encrypting secrets at rest (AES-256-GCM).
# Required for OIDC token cache, API key vault, and MCP credentials.
VAULT_MASTER_KEY=

# ─── Admin Bootstrap ─────────────────────────────────────────────────
# Creates the initial admin account on first startup.

ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=

# ─── LLM Provider API Keys ──────────────────────────────────────────
# At least one provider is required. Uncomment and set what you use.
# Format: API_KEY_{PROVIDER} (provider IDs from conf/model_providers.yaml)

# API_KEY_OPENAI=sk-...
# API_KEY_ANTHROPIC=sk-ant-...
# API_KEY_AZURE=
# API_KEY_GOOGLE=
# API_KEY_GROQ=
# API_KEY_LITELLM_PROXY=

# ─── Model Configuration (optional) ─────────────────────────────────
# Override default models via A0_SET_* prefix.

# A0_SET_CHAT_MODEL_PROVIDER=openai
# A0_SET_CHAT_MODEL_NAME=gpt-4o
# A0_SET_UTIL_MODEL_PROVIDER=openai
# A0_SET_UTIL_MODEL_NAME=gpt-4o-mini
# A0_SET_EMBED_MODEL_PROVIDER=huggingface
# A0_SET_EMBED_MODEL_NAME=sentence-transformers/all-MiniLM-L6-v2

# ─── Authentication — Legacy Single-User (simple) ───────────────────
# Basic username/password protection. Use for single-user deployments.
# For multi-user with SSO, use the OIDC section below instead.

# AUTH_LOGIN=admin
# AUTH_PASSWORD=changeme

# ─── Authentication — OIDC / Entra ID SSO (optional) ────────────────
# Microsoft Entra ID (Azure AD) single sign-on.
# Requires VAULT_MASTER_KEY to be set.

# OIDC_TENANT_ID=
# OIDC_CLIENT_ID=
# OIDC_CLIENT_SECRET=
# OIDC_REDIRECT_URI=https://your-domain.com/auth/callback

# SSO auto-assignment: add new SSO users to default org/team
# A0_SET_SSO_AUTO_ASSIGN=true
# A0_SET_SSO_DEFAULT_ROLE=member

# Bootstrap EntraID group mappings (semicolon-delimited)
# Format: entra_group_id:org_slug:team_slug:role
# A0_SET_SSO_GROUP_MAPPINGS=aad-guid-1:default:default:member;aad-guid-2:default:default:team_lead

# ─── MCP Server OAuth (optional) ────────────────────────────────────
# OAuth for IDE clients connecting via MCP protocol.
# Separate app registration from OIDC SSO.

# MCP_AZURE_CLIENT_ID=
# MCP_AZURE_CLIENT_SECRET=
# MCP_AZURE_TENANT_ID=
# MCP_SERVER_BASE_URL=https://your-domain.com
# MCP_AZURE_JWT_SIGNING_KEY=  # Generate: python3 -c "import secrets; print(secrets.token_urlsafe(48))"

# ─── PostgreSQL (--profile postgres) ─────────────────────────────────
# Only needed when running with: docker compose --profile postgres up -d
# Uncomment AUTH_DATABASE_URL to switch from SQLite to PostgreSQL.

# POSTGRES_PASSWORD=
# AUTH_DATABASE_URL=postgresql://apollos:${POSTGRES_PASSWORD}@postgres:5432/apollos_auth

# ─── Branding (optional) ────────────────────────────────────────────

# BRAND_NAME=Apollos AI
# BRAND_URL=https://apollos.ai
# BRAND_GITHUB_URL=https://github.com/jrmatherly/apollos-ai
